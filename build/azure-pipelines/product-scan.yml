trigger: none
pr: none

stages:
- stage: ScanBinaries
  jobs:
  - job: VSCode
    pool:
      vmImage: VS2017-Win2016
    steps:
    - powershell: |
        . build/azure-pipelines/win32/exec.ps1
        $ErrorActionPreference = "Stop"
        exec { yarn gulp "vscode-symbols-win32-x64" }
      displayName: Download Symbols

    - task: BinSkim@3
      inputs:
        toolVersion: Latest
        InputType:   CommandLine
        arguments:   analyze $(Build.ArtifactStagingDirectory)\symbols\*.dll;$(Build.ArtifactStagingDirectory)\symbols\*.exe --recurse
